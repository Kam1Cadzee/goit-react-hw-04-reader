{"version":3,"sources":["components/Reader/Controls/Controls.module.css","components/Modal/Modal.module.css","components/Reader/Publication/Publication.module.css","components/Reader/Counter/Counter.module.css","components/Reader/Reader.module.css","components/Reader/Publication/Publication.jsx","components/Reader/Counter/Counter.jsx","components/Reader/Controls/Controls.jsx","components/Modal/Modal.jsx","components/Reader/Reader.jsx","components/pages/ReaderPage.jsx","index.js"],"names":["module","exports","button","controls","backdrop","modal","publication","counter","reader","Publication","_ref","item","onOpen","_ref$isShowAll","isShowAll","text","title","isBigText","length","react_default","a","createElement","className","styles","slice","type","onClick","defaultProps","Counter","index","str","concat","Controls","prevPublic","nextPublic","disabled","Modal","refBackdrop","React","createRef","handleKeyPress","e","code","onClose","_this","props","handleBackdropClick","current","target","window","addEventListener","this","children","css","ref","aria-hidden","Component","getPageFromProps","queryString","parse","location","search","Reader","state","showModal","handelToggleModal","setState","_this$props","history","push","pathname","_this$props2","items","Reader_Publication_Publication","Reader_Counter_Counter","Reader_Controls_Controls","components_Modal_Modal","withRouter","ReaderPage","replace","components_Reader_Reader","ReactDOM","render","react_router_dom","basename","react_router","path","exact","component","to","document","getElementById"],"mappings":"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","file":"static/js/main.7c8992f1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Controls_button__Tc1Oi\",\"controls\":\"Controls_controls__fu_dr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"Modal_backdrop__1THXf\",\"modal\":\"Modal_modal__1YLvN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"publication\":\"Publication_publication__3uHQL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"counter\":\"Counter_counter__BiphN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reader\":\"Reader_reader__2wJCz\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Publication.module.css';\n\nconst MAX_LENGHT = 400;\nconst Publication = ({ item, onOpen, isShowAll = false }) => {\n  const { text, title } = item;\n  const isBigText = text.length > MAX_LENGHT;\n  return (\n    <section className={styles.publication}>\n      <h2>{title}</h2>\n      {!isShowAll && isBigText ? (\n        <p>\n          {text.slice(0, MAX_LENGHT)}...\n          <button type=\"button\" onClick={onOpen}>\n            Read all\n          </button>\n        </p>\n      ) : (\n        <p>{text}</p>\n      )}\n    </section>\n  );\n};\nPublication.defaultProps = {\n  isShowAll: false,\n};\nPublication.propTypes = {\n  item: PropTypes.shape({\n    text: PropTypes.string.isRequired,\n    title: PropTypes.string.isRequired,\n  }).isRequired,\n  onOpen: PropTypes.func.isRequired,\n  isShowAll: PropTypes.bool,\n};\nexport default Publication;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Counter.module.css';\n\nconst Counter = ({ index, length }) => {\n  const str = `${index + 1}/${length + 1}`;\n\n  return <p className={styles.counter}>{str}</p>;\n};\n\nCounter.propTypes = {\n  index: PropTypes.number.isRequired,\n  length: PropTypes.number.isRequired,\n};\nexport default Counter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Controls.module.css';\n\nconst Controls = ({ prevPublic, nextPublic, length, index }) => {\n  return (\n    <section className={styles.controls}>\n      <button\n        className={styles.button}\n        type=\"button\"\n        onClick={prevPublic}\n        disabled={index === 0}\n      >\n        Назад\n      </button>\n      <button\n        className={styles.button}\n        type=\"button\"\n        onClick={nextPublic}\n        disabled={index === length}\n      >\n        Вперед\n      </button>\n    </section>\n  );\n};\n\nControls.propTypes = {\n  prevPublic: PropTypes.func.isRequired,\n  nextPublic: PropTypes.func.isRequired,\n  length: PropTypes.number.isRequired,\n  index: PropTypes.number.isRequired,\n};\nexport default Controls;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport css from './Modal.module.css';\n\nclass Modal extends React.Component {\n  refBackdrop = React.createRef();\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyPress);\n  }\n\n  componentWillUnmount() {\n    window.addEventListener('keydown', this.handleKeyPress);\n  }\n\n  handleKeyPress = e => {\n    if (e.code !== 'Escape') return;\n\n    const { onClose } = this.props;\n    onClose();\n  };\n\n  handleBackdropClick = e => {\n    const { current } = this.refBackdrop;\n\n    if (current && e.target !== current) {\n      return;\n    }\n\n    const { onClose } = this.props;\n    onClose();\n  };\n\n  render() {\n    const { children } = this.props;\n    return (\n      <div\n        className={css.backdrop}\n        ref={this.refBackdrop}\n        onClick={this.handleBackdropClick}\n        aria-hidden=\"true\"\n      >\n        <div className={css.modal}>{children}</div>\n      </div>\n    );\n  }\n}\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  children: PropTypes.element.isRequired,\n};\nexport default Modal;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router-dom';\nimport queryString from 'query-string';\nimport Publication from './Publication/Publication';\nimport Counter from './Counter/Counter';\nimport Controls from './Controls/Controls';\n\nimport styles from './Reader.module.css';\nimport Modal from '../Modal/Modal';\n\nconst getPageFromProps = props => queryString.parse(props.location.search).item;\nclass Reader extends React.Component {\n  state = {\n    showModal: false,\n  };\n\n  handelToggleModal = () => {\n    this.setState(state => ({ showModal: !state.showModal }));\n  };\n\n  prevPublic = () => {\n    const { location, history } = this.props;\n    const index = +getPageFromProps(this.props);\n    history.push({\n      pathname: location.pathname,\n      search: `item=${index - 1}`,\n    });\n  };\n\n  nextPublic = () => {\n    const { location, history } = this.props;\n    const index = +getPageFromProps(this.props);\n    history.push({\n      pathname: location.pathname,\n      search: `item=${index + 1}`,\n    });\n  };\n\n  render() {\n    const { items } = this.props;\n    const { showModal } = this.state;\n    const index = getPageFromProps(this.props) - 1;\n    const length = items.length - 1;\n    return (\n      <div className={styles.reader}>\n        <Publication item={items[index]} onOpen={this.handelToggleModal} />\n        <Counter index={index} length={length} />\n        <Controls\n          prevPublic={this.prevPublic}\n          nextPublic={this.nextPublic}\n          length={length}\n          index={index}\n        />\n        {showModal && (\n          <Modal onClose={this.handelToggleModal}>\n            <Publication item={items[index]} isShowAll />\n          </Modal>\n        )}\n      </div>\n    );\n  }\n}\nReader.propTypes = {\n  items: PropTypes.array.isRequired,\n  location: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired,\n};\nexport default withRouter(Reader);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Reader from '../Reader/Reader';\nimport items from '../../publications';\n\nconst ReaderPage = props => {\n  const { location, history } = props;\n  if (location.search === '') {\n    history.replace({\n      pathname: location.pathname,\n      search: `item=1`,\n    });\n    return null;\n  }\n\n  return (\n    <div>\n      <Reader items={items} />\n    </div>\n  );\n};\nReaderPage.propTypes = {\n  location: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired,\n};\nexport default ReaderPage;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter, Route, Redirect, Switch } from 'react-router-dom';\nimport './index.css';\nimport ReaderPage from './components/pages/ReaderPage';\n\nReactDOM.render(\n  <HashRouter basename=\"/\">\n    <Switch>\n      <Route path=\"/reader\" exact component={ReaderPage} />\n      <Redirect to=\"/reader\" />\n    </Switch>\n  </HashRouter>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}